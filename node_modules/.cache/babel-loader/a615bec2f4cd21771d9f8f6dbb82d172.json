{"remainingRequest":"C:\\Users\\m.ebisu\\Desktop\\zl_connect\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\m.ebisu\\Desktop\\zl_connect\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\m.ebisu\\Desktop\\zl_connect\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\m.ebisu\\Desktop\\zl_connect\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\m.ebisu\\Desktop\\zl_connect\\src\\components\\Balloon.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\m.ebisu\\Desktop\\zl_connect\\src\\components\\Balloon.vue","mtime":1652246787000},{"path":"C:\\Users\\m.ebisu\\Desktop\\zl_connect\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739441789589},{"path":"C:\\Users\\m.ebisu\\Desktop\\zl_connect\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1739441789588},{"path":"C:\\Users\\m.ebisu\\Desktop\\zl_connect\\node_modules\\babel-loader\\lib\\index.js","mtime":1739441795918},{"path":"C:\\Users\\m.ebisu\\Desktop\\zl_connect\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739441789589},{"path":"C:\\Users\\m.ebisu\\Desktop\\zl_connect\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1739441797509}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVmLCBjb21wdXRlZCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCBkYXlqcyBmcm9tICdkYXlqcyc7CmltcG9ydCAnZGF5anMvbG9jYWxlL2phJzsKZGF5anMubG9jYWxlKCdqYScpOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0JhbGxvb24nLAogIHByb3BzOiB7CiAgICBjaGF0SWQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHR5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHNwZWFrZXI6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIG1lc3NhZ2U6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9LAogICAgdXJsOiB7CiAgICAgIHR5cGU6IFN0cmluZwogICAgfSwKICAgIHRpbWVzdGFtcDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgaXNGaXJzdExvYWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBpc1ZpZXdEYXRlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgY29udGVudFNjcm9sbDogewogICAgICB0eXBlOiBGdW5jdGlvbgogICAgfSwKICAgIG9wZW5QcmV2aWV3OiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uCiAgICB9CiAgfSwKICBzZXR1cChwcm9wcykgewogICAgLy8g6YCB5L+h5pmC6ZaT44Gu6KGo56S6CiAgICBjb25zdCB0U3RhbXAgPSBjb21wdXRlZCgoKSA9PiBkYXlqcyhwcm9wcy50aW1lc3RhbXAsICJZWVlZLU1NLUREIEhIOm1tOnNzLlNTUyIpLmZvcm1hdCgiSEg6bW0iKSk7CiAgICAvLyDml6Xku5jjga7ooajnpLoKICAgIGNvbnN0IHZpZXdEYXRlID0gY29tcHV0ZWQoKCkgPT4gewogICAgICBpZiAoZGF5anMoKS5pc1NhbWUoZGF5anMocHJvcHMudGltZXN0YW1wLCAiWVlZWS1NTS1ERCBISDptbTpzcy5TU1MiKSwgImRheSIpKSB7CiAgICAgICAgcmV0dXJuICLmnKzml6UiOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBkYXlqcyhwcm9wcy50aW1lc3RhbXAsICJZWVlZLU1NLUREIEhIOm1tOnNzLlNTUyIpLmZvcm1hdCgiTU0vREQiKTsKICAgICAgfQogICAgfSk7CiAgICAvLyDnlLvlg4/jgajli5XnlLvjga7oqq3jgb/ovrzjgb/jg5Xjg6njgrAKICAgIGNvbnN0IGlzQ29udGVudExvYWRlZCA9IHJlZihmYWxzZSk7CiAgICBjb25zdCBjb250ZW50TG9hZGVkID0gKCkgPT4gewogICAgICBpc0NvbnRlbnRMb2FkZWQudmFsdWUgPSB0cnVlOwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBwcm9wcy5jb250ZW50U2Nyb2xsKHByb3BzLmlzRmlyc3RMb2FkKTsKICAgICAgfSwgMCk7CiAgICB9OwoKICAgIC8v55S75YOP44Kv44Oq44OD44Kv5pmC44Gr5Yil44K/44OW44Gn55S75YOP44KS6ZaL44GPCiAgICBjb25zdCBjbGlja2VkSW1hZ2UgPSBldmVudCA9PiB7CiAgICAgIHByb3BzLm9wZW5QcmV2aWV3KGV2ZW50LnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCksIGV2ZW50LnRhcmdldC5zcmMpOwogICAgfTsKICAgIHJldHVybiB7CiAgICAgIHRTdGFtcCwKICAgICAgdmlld0RhdGUsCiAgICAgIGNsaWNrZWRJbWFnZSwKICAgICAgaXNDb250ZW50TG9hZGVkLAogICAgICBjb250ZW50TG9hZGVkCiAgICB9OwogIH0KfTs="},{"version":3,"names":["ref","computed","dayjs","locale","name","props","chatId","type","Number","required","String","speaker","message","url","timestamp","isFirstLoad","Boolean","isViewDate","contentScroll","Function","openPreview","setup","tStamp","format","viewDate","isSame","isContentLoaded","contentLoaded","value","setTimeout","clickedImage","event","target","tagName","toLowerCase","src"],"sources":["C:\\Users\\m.ebisu\\Desktop\\zl_connect\\src\\components\\Balloon.vue"],"sourcesContent":["<template>\n  <div v-if=\"isViewDate\" class=\"m-2\"><span class=\"bg-white border border-main padding-balloon rounded-pill\">{{ viewDate }}</span></div>\n  <div class=\"balloon\" :class=\"speaker\">\n    <div :class=\"{active: !isContentLoaded && (type === 'image' || type === 'video')}\" class=\"spinner-border\" role=\"status\">\n      <span class=\"visually-hidden\">読込中...</span>\n    </div>\n    <p v-if=\"type === 'text'\" class=\"message padding-balloon\">{{ message }}</p>\n    <img v-else-if=\"type === 'sticker'\" :src=\"url\" @load=\"contentLoaded\" class=\"sticker\">\n    <img v-else-if=\"type === 'image'\" :src=\"url\" @load=\"contentLoaded\" @click=\"clickedImage\">\n    <video v-else-if=\"type === 'video'\" :src=\"url + '#t=0.001'\" @loadedmetadata=\"contentLoaded\" controls playsinline></video>\n    <audio v-else-if=\"type === 'audio'\" :src=\"url\" controls></audio>\n    <a v-else-if=\"type === 'application'\" :href=\"url\" class=\"message padding-balloon\" target=\"_blank\" rel=\"noopener noreferrer\">{{ url }}</a>\n    <span class=\"timestamp text-muted mx-1\">{{ tStamp }}</span>\n  </div>\n</template>\n\n<script>\nimport { ref, computed } from 'vue';\n\nimport dayjs from 'dayjs';\nimport 'dayjs/locale/ja';\ndayjs.locale('ja');\n\nexport default {\n  name: 'Balloon',\n  props: {\n    chatId: {\n      type: Number,\n      required: true\n    },\n    type: {\n      type: String,\n      required: true\n    },\n    speaker: {\n      type: String,\n      required: true\n    },\n    message: {\n      type: String\n    },\n    url: {\n      type: String\n    },\n    timestamp: {\n      type: String,\n      required: true\n    },\n    isFirstLoad: {\n      type: Boolean,\n      required: true\n    },\n    isViewDate: {\n      type: Boolean,\n      required: true\n    },\n    contentScroll: {\n      type: Function\n    },\n    openPreview: {\n      type: Function\n    }\n  },\n  setup(props){\n    // 送信時間の表示\n    const tStamp = computed(() => dayjs(props.timestamp, \"YYYY-MM-DD HH:mm:ss.SSS\").format(\"HH:mm\"));\n    // 日付の表示\n    const viewDate = computed(() => {\n      if(dayjs().isSame( dayjs(props.timestamp, \"YYYY-MM-DD HH:mm:ss.SSS\"), \"day\" )){\n        return \"本日\";\n      }else{\n        return dayjs(props.timestamp, \"YYYY-MM-DD HH:mm:ss.SSS\").format(\"MM/DD\");\n      }\n    });\n    // 画像と動画の読み込みフラグ\n    const isContentLoaded = ref(false);\n\n    const contentLoaded = () => {\n      isContentLoaded.value = true;\n      setTimeout(() => {\n        props.contentScroll(props.isFirstLoad);\n      }, 0);\n    }\n\n    //画像クリック時に別タブで画像を開く\n    const clickedImage = (event) => {\n      props.openPreview(event.target.tagName.toLowerCase(), event.target.src);\n    }\n\n    return {\n      tStamp,\n      viewDate,\n      clickedImage,\n      isContentLoaded,\n      contentLoaded,\n    }\n  }\n}\n</script>\n\n<style scoped>\n.balloon {\n  margin: 5px 0;\n  display:flex;\n  justify-content: flex-start;\n  align-items: flex-end;\n}\n.balloon.left {\n  margin-left: 15px;\n}\n.balloon.right {\n  margin-right: 15px;\n  flex-flow: row-reverse;\n}\np,a {\n  max-width: 60%; /*最大幅は任意*/\n  overflow-wrap: break-word;\n  white-space: pre-wrap;\n  text-align: start;\n  border-radius: 12px;\n  margin:0 !important;\n  line-height:1.5;\n}\nimg {\n  cursor: pointer;\n}\n.pc img, .pc video {\n  max-width: 20%;\n}\n.sp img, .sp video {\n  max-width: 70%;\n}\n\nimg, video {\n  border-radius: 6px;\n}\n.balloon.right p,a {\n  color: #fff;\n  background-color: var(--bs-accent);\n}\n\n.balloon.right a:hover {\n\tcolor:#C0C0C0; \t/*リンクにマウスが乗ったら背景色を変更する*/\n}\n\n.balloon.left p {\n  color: #000;\n  background-color: #fff;\n  border: 1px solid var(--bs-accent);\n}\n\n.timestamp {\n  font-size: 70%\n}\n.padding-balloon {\n  padding: 1px 10px;\n}\n</style>\n"],"mappings":"AAiBA,SAASA,GAAG,EAAEC,QAAO,QAAS,KAAK;AAEnC,OAAOC,KAAI,MAAO,OAAO;AACzB,OAAO,iBAAiB;AACxBA,KAAK,CAACC,MAAM,CAAC,IAAI,CAAC;AAElB,eAAe;EACbC,IAAI,EAAE,SAAS;EACfC,KAAK,EAAE;IACLC,MAAM,EAAE;MACNC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACZ,CAAC;IACDF,IAAI,EAAE;MACJA,IAAI,EAAEG,MAAM;MACZD,QAAQ,EAAE;IACZ,CAAC;IACDE,OAAO,EAAE;MACPJ,IAAI,EAAEG,MAAM;MACZD,QAAQ,EAAE;IACZ,CAAC;IACDG,OAAO,EAAE;MACPL,IAAI,EAAEG;IACR,CAAC;IACDG,GAAG,EAAE;MACHN,IAAI,EAAEG;IACR,CAAC;IACDI,SAAS,EAAE;MACTP,IAAI,EAAEG,MAAM;MACZD,QAAQ,EAAE;IACZ,CAAC;IACDM,WAAW,EAAE;MACXR,IAAI,EAAES,OAAO;MACbP,QAAQ,EAAE;IACZ,CAAC;IACDQ,UAAU,EAAE;MACVV,IAAI,EAAES,OAAO;MACbP,QAAQ,EAAE;IACZ,CAAC;IACDS,aAAa,EAAE;MACbX,IAAI,EAAEY;IACR,CAAC;IACDC,WAAW,EAAE;MACXb,IAAI,EAAEY;IACR;EACF,CAAC;EACDE,KAAKA,CAAChB,KAAK,EAAC;IACV;IACA,MAAMiB,MAAK,GAAIrB,QAAQ,CAAC,MAAMC,KAAK,CAACG,KAAK,CAACS,SAAS,EAAE,yBAAyB,CAAC,CAACS,MAAM,CAAC,OAAO,CAAC,CAAC;IAChG;IACA,MAAMC,QAAO,GAAIvB,QAAQ,CAAC,MAAM;MAC9B,IAAGC,KAAK,CAAC,CAAC,CAACuB,MAAM,CAAEvB,KAAK,CAACG,KAAK,CAACS,SAAS,EAAE,yBAAyB,CAAC,EAAE,KAAM,CAAC,EAAC;QAC5E,OAAO,IAAI;MACb,CAAC,MAAI;QACH,OAAOZ,KAAK,CAACG,KAAK,CAACS,SAAS,EAAE,yBAAyB,CAAC,CAACS,MAAM,CAAC,OAAO,CAAC;MAC1E;IACF,CAAC,CAAC;IACF;IACA,MAAMG,eAAc,GAAI1B,GAAG,CAAC,KAAK,CAAC;IAElC,MAAM2B,aAAY,GAAIA,CAAA,KAAM;MAC1BD,eAAe,CAACE,KAAI,GAAI,IAAI;MAC5BC,UAAU,CAAC,MAAM;QACfxB,KAAK,CAACa,aAAa,CAACb,KAAK,CAACU,WAAW,CAAC;MACxC,CAAC,EAAE,CAAC,CAAC;IACP;;IAEA;IACA,MAAMe,YAAW,GAAKC,KAAK,IAAK;MAC9B1B,KAAK,CAACe,WAAW,CAACW,KAAK,CAACC,MAAM,CAACC,OAAO,CAACC,WAAW,CAAC,CAAC,EAAEH,KAAK,CAACC,MAAM,CAACG,GAAG,CAAC;IACzE;IAEA,OAAO;MACLb,MAAM;MACNE,QAAQ;MACRM,YAAY;MACZJ,eAAe;MACfC;IACF;EACF;AACF","ignoreList":[]}]}
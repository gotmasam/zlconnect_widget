{"remainingRequest":"C:\\Users\\m.ebisu\\Desktop\\zl_connect\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\m.ebisu\\Desktop\\zl_connect\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\m.ebisu\\Desktop\\zl_connect\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\m.ebisu\\Desktop\\zl_connect\\src\\views\\Main.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\m.ebisu\\Desktop\\zl_connect\\src\\views\\Main.vue","mtime":1661155244000},{"path":"C:\\Users\\m.ebisu\\Desktop\\zl_connect\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739441789589},{"path":"C:\\Users\\m.ebisu\\Desktop\\zl_connect\\node_modules\\babel-loader\\lib\\index.js","mtime":1739441795918},{"path":"C:\\Users\\m.ebisu\\Desktop\\zl_connect\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739441789589},{"path":"C:\\Users\\m.ebisu\\Desktop\\zl_connect\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1739441797509}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVmLCByZWFjdGl2ZSwgb25Nb3VudGVkLCBvbkJlZm9yZVVubW91bnQsIHdhdGNoRWZmZWN0IH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgdXNlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCBab2hvTElORSBmcm9tICcuLi9saWIvWm9ob0xJTkUuanMnOwppbXBvcnQgSGVhZGVyIGZyb20gJy4uL2NvbXBvbmVudHMvSGVhZGVyLnZ1ZSc7CmltcG9ydCBCYWxsb29uIGZyb20gJy4uL2NvbXBvbmVudHMvQmFsbG9vbi52dWUnOwppbXBvcnQgRm9vdGVyIGZyb20gJy4uL2NvbXBvbmVudHMvRm9vdGVyLnZ1ZSc7CmltcG9ydCBQcmV2aWV3IGZyb20gJy4uL2NvbXBvbmVudHMvUHJldmlldy52dWUnOwppbXBvcnQgTG9hZGluZ1NwaW5uZXIgZnJvbSAnLi4vY29tcG9uZW50cy9Mb2FkaW5nU3Bpbm5lci52dWUnOwppbXBvcnQgQWxlcnQgZnJvbSAnLi4vY29tcG9uZW50cy9BbGVydC52dWUnOwppbXBvcnQgZGF5anMgZnJvbSAnZGF5anMnOwppbXBvcnQgJ2RheWpzL2xvY2FsZS9qYSc7CmRheWpzLmxvY2FsZSgnamEnKTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdNYWluJywKICBjb21wb25lbnRzOiB7CiAgICBIZWFkZXIsCiAgICBCYWxsb29uLAogICAgRm9vdGVyLAogICAgTG9hZGluZ1NwaW5uZXIsCiAgICBQcmV2aWV3LAogICAgQWxlcnQKICB9LAogIHNldHVwKCkgewogICAgY29uc29sZS5sb2coInNldHVwIik7CiAgICBjb25zdCBVU0VSX1RZUEVfT0JKID0gewogICAgICAwOiAicmlnaHQiLAogICAgICAxOiAibGVmdCIKICAgIH07CiAgICBjb25zdCBDSEFUX1RZUEVfT0JKID0gewogICAgICAwOiAidGV4dCIsCiAgICAgIDE6ICJzdGlja2VyIiwKICAgICAgLy8g44K544K/44Oz44OXCiAgICAgIDI6ICJpbWFnZSIsCiAgICAgIC8vIOeUu+WDjwogICAgICAzOiAidmlkZW8iLAogICAgICAvLyDli5XnlLsKICAgICAgNDogImF1ZGlvIiwKICAgICAgLy8g6Z+z5aOwCiAgICAgIDU6ICJhcHBsaWNhdGlvbiIgLy8gUERGCiAgICB9OwogICAgY29uc3QgQVVUT19SRUxPQURfSU5URVJWQUwgPSAxICogMTAwMDsKICAgIC8vIFpvaG9MSU5F44Kv44Op44K5CiAgICBsZXQgWkxDID0gbnVsbDsKICAgIC8vIFpvaG/jg5fjg6njgrDjgqTjg7MKICAgIGNvbnN0IFpPSE8gPSB3aW5kb3cuWk9ITzsKICAgIC8vIHZ1ZS1yb3V0ZXIKICAgIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpOwogICAgLy8g6Kqt44G/6L6844G/44OV44Op44KwCiAgICBjb25zdCBpc0xvYWRlZCA9IHJlZihmYWxzZSk7CiAgICAvLyBab2hvIENSTeODreOCsOOCpOODs+ODpuODvOOCtuODvOODh+ODvOOCvwogICAgY29uc3QgY3VycmVudFVzZXIgPSByZWYoIiIpOwogICAgLy8gWm9ob+ODrOOCs+ODvOODieODh+ODvOOCvwogICAgY29uc3QgbGluZVVzZXJEYXRhID0gcmVmKCIiKTsKICAgIC8vIOmhp+WuoklECiAgICBjb25zdCBsaW5lVXNlcklkID0gcmVmKCIiKTsKICAgIC8vIExJTkXjg4Hjg6Pjg4Pjg4jjg63jgrAKICAgIGNvbnN0IGNoYXRMb2dzID0gcmVmKFtdKTsKICAgIC8vTElOReaXouiqreaZgumWkwogICAgY29uc3QgbGFzdF9yZWFkX3RpbWUgPSByZWYoIjAiKTsKICAgIC8v5Y+W5b6X44GX44Gf5LiA55Wq5Y+k44GETElOReODgeODo+ODg+ODiOOBruaZgumWkwogICAgY29uc3Qgb2xkZXN0X2NoYXRfdGltZSA9IHJlZihkYXlqcygpLmZvcm1hdCgiWVlZWS1NTS1ERCBISDptbTpzcy5TU1MiKSk7CiAgICAvLyBab2hvTElOReOBruWlkee0hOS8gealrUlECiAgICBjb25zdCBjb21wYW55SWQgPSByZWYoJycpOwogICAgLy8gWm9ob0xJTkXjga7jg4Hjg6Pjg7Pjg43jg6tJRAogICAgY29uc3QgY2hhbm5lbElkID0gcmVmKCcnKTsKICAgIC8vIFpvaG9MSU5F44GuQVBJ44Kt44O8CiAgICBjb25zdCBhcGlLZXkgPSByZWYoJycpOwogICAgLy/jg5jjg4Pjg4Djg7zjga5ET00KICAgIGNvbnN0IGhlYWRlciA9IHJlZihudWxsKTsKICAgIC8v44OB44Oj44OD44OI6KGo56S644Ko44Oq44Ki44GuRE9NCiAgICBjb25zdCBjb250ZW50ID0gcmVmKG51bGwpOwogICAgLy/jg4Hjg6Pjg4Pjg4jooajnpLrjgqjjg6rjgqLjga7jgrnjgq/jg63jg7zjg6vkvY3nva4KICAgIGNvbnN0IGNvbnRlbnRTY3JvbGxQb3NpdGlvbiA9IHJlZihudWxsKTsKICAgIC8v44K544Kv44Ot44O844Or5L2N572u44GM5LiA55Wq5LiL44Gn44GC44KL44GLCiAgICBjb25zdCBpc0JvdHRvbVNjcm9sbFBvc2l0aW9uID0gcmVmKG51bGwpOwogICAgLy8g5pyA5Yid44Gu44OB44Oj44OD44OI44OH44O844K/5Y+W5b6X44OV44Op44KwCiAgICBjb25zdCBpc0ZpcnN0R2V0Q2hhdERhdGEgPSByZWYodHJ1ZSk7CiAgICAvLyDoh6rli5Xmm7TmlrDjgpLooYzjgYZzZXRJbnRlcnZhbOOBrklECiAgICBjb25zdCBhdXRvUmVsb2FkSWQgPSByZWYobnVsbCk7CiAgICAvLyDoh6rli5Xmm7TmlrDjga7oh6rli5XlgZzmraLmmYLplpMo6Ieq5YuV5pu05paw6ZaL5aeL44GL44KJ77yW5pmC6ZaT5b6M44Gr6Ieq5YuV5YGc5q2iKSBkYXlqc+OCquODluOCuOOCp+OCr+ODiAogICAgY29uc3QgYXV0b1JlbG9hZExpbWl0VGltZSA9IHJlZihudWxsKTsKICAgIC8vIOerr+acq+OBruitmOWIpeeUqOWkieaVsAogICAgY29uc3QgdGVybWluYWwgPSByZWYoInBjIik7CiAgICAvLyDjgqLjg6njg7zjg4jooajnpLrnlKjlpInmlbAKICAgIGNvbnN0IGFsZXJ0TGlzdCA9IHJlZihbXSk7CiAgICAvLyDjgrPjg7Pjg4bjg7Pjg4Tjg5fjg6zjg5Pjg6Xjg7znlKjlpInmlbAKICAgIGNvbnN0IHByZXZpZXdJbmZvID0gcmVhY3RpdmUoewogICAgICBpc1Nob3c6IGZhbHNlLAogICAgICB0YWc6ICJpbWciLAogICAgICBzcmM6ICIiCiAgICB9KTsKICAgIC8vIOaWsOimj+ODoeODg+OCu+ODvOOCuOacquihqOekuuS7tuaVsAogICAgY29uc3QgbmV3TWVzc2FnZUNvdW50ID0gcmVmKDApOwogICAgLy8g44OW44Ot44OD44Kv44OV44Op44KwCiAgICBjb25zdCBibG9ja19zdGF0dXMgPSByZWYoZmFsc2UpOwogICAgd2F0Y2hFZmZlY3QoKCkgPT4gewogICAgICBjb250ZW50U2Nyb2xsKCk7CiAgICB9LCB7CiAgICAgIGZsdXNoOiAncG9zdCcKICAgIH0pOwogICAgb25Nb3VudGVkKGFzeW5jICgpID0+IHsKICAgICAgY29uc29sZS5sb2coIm9uTW91bnRlZCIpOwogICAgICBjb25zdCBhcHBFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFwcCIpOwogICAgICBnZXRUZXJtaW5hbCgpOwogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZ2V0VGVybWluYWwpOwogICAgICAvL1pvaG/jg5fjg6njgrDjgqTjg7Pjga7liJ3mnJ/ljJblrozkuobmmYIKICAgICAgWk9ITy5lbWJlZGRlZEFwcC5vbigiUGFnZUxvYWQiLCBkYXRhID0+IHsKICAgICAgICBhcHBFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2xvYWRlZCcpOwogICAgICAgIGFwcEVsZW1lbnQuZGF0YXNldC5lbnRpdHkgPSBkYXRhLkVudGl0eTsKICAgICAgICBhcHBFbGVtZW50LmRhdGFzZXQuZW50aXR5SWQgPSBkYXRhLkVudGl0eUlkOwogICAgICAgIC8vIFpvaG9MSU5F44Gu5b+F6KaB44Gq44OH44O844K/44Gu5Y+W5b6XCiAgICAgICAgaW5pdGlhbGl6ZShkYXRhKTsKICAgICAgfSk7CiAgICAgIC8vWm9ob+ODl+ODqeOCsOOCpOODs+OBruWIneacn+WMlgogICAgICBaT0hPLmVtYmVkZGVkQXBwLmluaXQoKTsKICAgICAgaWYgKGFwcEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdsb2FkZWQnKSkgewogICAgICAgIGluaXRpYWxpemUoewogICAgICAgICAgRW50aXR5OiBhcHBFbGVtZW50LmRhdGFzZXQuZW50aXR5LAogICAgICAgICAgRW50aXR5SWQ6IGFwcEVsZW1lbnQuZGF0YXNldC5lbnRpdHlJZAogICAgICAgIH0pOwogICAgICB9CiAgICB9KTsKICAgIG9uQmVmb3JlVW5tb3VudCgoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCJvbkJlZm9yZVVubW91bnQiKTsKICAgICAgaWYgKGF1dG9SZWxvYWRJZC52YWx1ZSAhPSBudWxsKSB7CiAgICAgICAgY2xlYXJUaW1lb3V0KGF1dG9SZWxvYWRJZC52YWx1ZSk7CiAgICAgICAgYXV0b1JlbG9hZElkLnZhbHVlID0gbnVsbDsKICAgICAgfQogICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZ2V0VGVybWluYWwpOwogICAgfSk7CiAgICBjb25zdCBpbml0aWFsaXplID0gYXN5bmMgZGF0YSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgaXNGaXJzdEdldENoYXREYXRhLnZhbHVlID0gdHJ1ZTsKICAgICAgICAvL0xJTkXjg6bjg7zjgrbjg7zjg4fjg7zjgr/jga7lj5blvpcKICAgICAgICBsaW5lVXNlckRhdGEudmFsdWUgPSBhd2FpdCBnZXRab2hvQ3VzdG9tZXJJZChkYXRhLkVudGl0eSwgZGF0YS5FbnRpdHlJZCk7CiAgICAgICAgbGluZVVzZXJJZC52YWx1ZSA9IGxpbmVVc2VyRGF0YS52YWx1ZS5MSU5FX0lEOwogICAgICAgIC8vIFpvaG9MSU5F44GuQVBJ44Kt44O844Gu5Y+W5b6XCiAgICAgICAgY29uc3Qgem9ob0xpbmVDb25maWcgPSBhd2FpdCBnZXRab2hvQ1JNVmFyaWFibGVzKHsKICAgICAgICAgIGFwaUtleXM6IFsiem9ob19saW5lX2FwaV9rZXkiLCAiem9ob19saW5lX2NvbXBhbnlfaWQiLCAiem9ob19saW5lX2NoYW5uZWxfaWQiXQogICAgICAgIH0pOwogICAgICAgIGlmICh6b2hvTGluZUNvbmZpZy56b2hvX2xpbmVfY29tcGFueV9pZC52YWx1ZSkgewogICAgICAgICAgY29tcGFueUlkLnZhbHVlID0gem9ob0xpbmVDb25maWcuem9ob19saW5lX2NvbXBhbnlfaWQudmFsdWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcigi5aWR57SE5LyB5qWtSUTjgYzopovjgaTjgYvjgorjgb7jgZvjgpPjgafjgZfjgZ8iKTsKICAgICAgICB9CiAgICAgICAgaWYgKHpvaG9MaW5lQ29uZmlnLnpvaG9fbGluZV9hcGlfa2V5LnZhbHVlKSB7CiAgICAgICAgICBhcGlLZXkudmFsdWUgPSB6b2hvTGluZUNvbmZpZy56b2hvX2xpbmVfYXBpX2tleS52YWx1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJab2hvTElORSBBUEnjgq3jg7zjgYzopovjgaTjgYvjgorjgb7jgZvjgpPjgafjgZfjgZ8iKTsKICAgICAgICB9CiAgICAgICAgaWYgKHpvaG9MaW5lQ29uZmlnLnpvaG9fbGluZV9jaGFubmVsX2lkLnZhbHVlKSB7CiAgICAgICAgICBjaGFubmVsSWQudmFsdWUgPSB6b2hvTGluZUNvbmZpZy56b2hvX2xpbmVfY2hhbm5lbF9pZC52YWx1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJab2hvTElORSDjg4Hjg6Pjg7Pjg43jg6tJROOBjOimi+OBpOOBi+OCiuOBvuOBm+OCk+OBp+OBl+OBnyIpOwogICAgICAgIH0KICAgICAgICBaTEMgPSBuZXcgWm9ob0xJTkUoY29tcGFueUlkLnZhbHVlLCBjaGFubmVsSWQudmFsdWUsIGFwaUtleS52YWx1ZSk7CiAgICAgICAgLy8g44OW44Ot44OD44Kv44K544OG44O844K/44K544Gu5Y+W5b6XCiAgICAgICAgY29uc3QgdXNlckRhdGEgPSBhd2FpdCBaTEMuZ2V0QmxvY2tGbGcobGluZVVzZXJJZC52YWx1ZSk7CiAgICAgICAgYmxvY2tfc3RhdHVzLnZhbHVlID0gdXNlckRhdGEuYmxvY2tfc3RhdHVzOwogICAgICAgIGNvbnNvbGUubG9nKCLjg5bjg63jg4Pjgq/jgrnjg4bjg7zjgr/jgrnvvJoiLCBibG9ja19zdGF0dXMudmFsdWUpOwogICAgICAgIGN1cnJlbnRVc2VyLnZhbHVlID0gYXdhaXQgZ2V0Q3VycmVudFVzZXIoKTsKICAgICAgICBhd2FpdCBzdXBwb3J0Tm90aWZpY2F0aW9uKCJzdGFydCIpOwogICAgICAgIHRvZ2dsZUF1dG9SZWxvYWQoZmFsc2UpOwogICAgICAgIHRvZ2dsZUF1dG9SZWxvYWQodHJ1ZSk7CiAgICAgICAgaXNMb2FkZWQudmFsdWUgPSB0cnVlOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICAgICAgcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogJ0Vycm9yJywKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9OwogICAgY29uc3Qgc2VuZENoYXQgPSBhc3luYyAobWVzc2FnZSwgdHlwZSwgZmlsZSA9IG51bGwpID0+IHsKICAgICAgLy8g44Oh44OD44K744O844K46YCB5L+hCiAgICAgIGlmICh0eXBlID09ICJ0ZXh0IikgewogICAgICAgIGF3YWl0IFpMQy5zZW5kQ2hhdChsaW5lVXNlcklkLnZhbHVlLCBtZXNzYWdlKS5jYXRjaChlcnIgPT4gewogICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgICAgICAgaWYgKGVyci5yZXNwb25zZUpTT04udHlwZSA9PSAiUmVtYWluaW5nIikgewogICAgICAgICAgICBzaG93QWxlcnQoImRhbmdlciIsICLpgIHkv6HkuIrpmZDmlbDjgpLotoXjgYjjgZ/jgZ/jgoHjgIHpgIHkv6HjgavlpLHmlZfjgZfjgb7jgZfjgZ/jgIIiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNob3dBbGVydCgiZGFuZ2VyIiwgIuODoeODg+OCu+ODvOOCuOOBrumAgeS/oeOBq+WkseaVl+OBl+OBvuOBl+OBnyIpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIC8vIOOCueOCv+ODs+ODl+mAgeS/oQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gInN0aWNrZXIiKSB7CiAgICAgICAgYXdhaXQgWkxDLnNlbmRTdGlja2VyQ2hhdChsaW5lVXNlcklkLnZhbHVlLCBtZXNzYWdlKS5jYXRjaChlcnIgPT4gewogICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgICAgICAgaWYgKGVyci5yZXNwb25zZUpTT04udHlwZSA9PSAiUmVtYWluaW5nIikgewogICAgICAgICAgICBzaG93QWxlcnQoImRhbmdlciIsICLpgIHkv6HkuIrpmZDmlbDjgpLotoXjgYjjgZ/jgZ/jgoHjgIHpgIHkv6HjgavlpLHmlZfjgZfjgb7jgZfjgZ/jgIIiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNob3dBbGVydCgiZGFuZ2VyIiwgIuOCueOCv+ODs+ODl+OBrumAgeS/oeOBq+WkseaVl+OBl+OBvuOBl+OBnyIpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIC8vIOeUu+WDj+mAgeS/oQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gImltYWdlIikgewogICAgICAgIGF3YWl0IFpMQy5zZW5kSW1hZ2VDaGF0KGxpbmVVc2VySWQudmFsdWUsIGZpbGUpLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7CiAgICAgICAgICBpZiAoZXJyLnJlc3BvbnNlSlNPTi50eXBlID09ICJSZW1haW5pbmciKSB7CiAgICAgICAgICAgIHNob3dBbGVydCgiZGFuZ2VyIiwgIumAgeS/oeS4iumZkOaVsOOCkui2heOBiOOBn+OBn+OCgeOAgemAgeS/oeOBq+WkseaVl+OBl+OBvuOBl+OBn+OAgiIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2hvd0FsZXJ0KCJkYW5nZXIiLCAi55S75YOP44Gu6YCB5L+h44Gr5aSx5pWX44GX44G+44GX44GfIik7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgLy8g5YuV55S76YCB5L+hCiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAidmlkZW8iKSB7CiAgICAgICAgYXdhaXQgWkxDLnNlbmRWaWRlb0NoYXQobGluZVVzZXJJZC52YWx1ZSwgZmlsZSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgICAgIGlmIChlcnIucmVzcG9uc2VKU09OLnR5cGUgPT0gIlJlbWFpbmluZyIpIHsKICAgICAgICAgICAgc2hvd0FsZXJ0KCJkYW5nZXIiLCAi6YCB5L+h5LiK6ZmQ5pWw44KS6LaF44GI44Gf44Gf44KB44CB6YCB5L+h44Gr5aSx5pWX44GX44G+44GX44Gf44CCIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzaG93QWxlcnQoImRhbmdlciIsICLli5XnlLvjga7pgIHkv6HjgavlpLHmlZfjgZfjgb7jgZfjgZ8iKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICAvLyDpn7Plo7DpgIHkv6EKICAgICAgfSBlbHNlIGlmICh0eXBlID09ICJhdWRpbyIpIHsKICAgICAgICBhd2FpdCBaTEMuc2VuZEF1ZGlvQ2hhdChsaW5lVXNlcklkLnZhbHVlLCBmaWxlKS5jYXRjaChlcnIgPT4gewogICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgICAgICAgaWYgKGVyci5yZXNwb25zZUpTT04udHlwZSA9PSAiUmVtYWluaW5nIikgewogICAgICAgICAgICBzaG93QWxlcnQoImRhbmdlciIsICLpgIHkv6HkuIrpmZDmlbDjgpLotoXjgYjjgZ/jgZ/jgoHjgIHpgIHkv6HjgavlpLHmlZfjgZfjgb7jgZfjgZ/jgIIiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNob3dBbGVydCgiZGFuZ2VyIiwgIumfs+WjsOOBrumAgeS/oeOBq+WkseaVl+OBl+OBvuOBl+OBnyIpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIC8vIFBERumAgeS/oQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gImFwcGxpY2F0aW9uIikgewogICAgICAgIGF3YWl0IFpMQy5zZW5kUGRmQ2hhdChsaW5lVXNlcklkLnZhbHVlLCBmaWxlKS5jYXRjaChlcnIgPT4gewogICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgICAgICAgaWYgKGVyci5yZXNwb25zZUpTT04udHlwZSA9PSAiUmVtYWluaW5nIikgewogICAgICAgICAgICBzaG93QWxlcnQoImRhbmdlciIsICLpgIHkv6HkuIrpmZDmlbDjgpLotoXjgYjjgZ/jgZ/jgoHjgIHpgIHkv6HjgavlpLHmlZfjgZfjgb7jgZfjgZ/jgIIiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHNob3dBbGVydCgiZGFuZ2VyIiwgIlBERuOBrumAgeS/oeOBq+WkseaVl+OBl+OBvuOBl+OBnyIpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlzQm90dG9tU2Nyb2xsUG9zaXRpb24udmFsdWUgPSBudWxsOwogICAgICAvLyBhd2FpdCBnZXROZXdMSU5FQ2hhdERhdGEoKTsKICAgIH07CgogICAgLy8gTElORemAo+aQuua4iOOBv+OBrumhp+WuoklE44Gu5Y+W5b6XCiAgICBjb25zdCBnZXRab2hvQ3VzdG9tZXJJZCA9IChlbnRpdHksIHJlY29yZElkKSA9PiB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgWk9ITy5DUk0uQVBJLmdldFJlY29yZCh7CiAgICAgICAgICBFbnRpdHk6IGVudGl0eSwKICAgICAgICAgIFJlY29yZElEOiByZWNvcmRJZAogICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgJiYgcmVzcG9uc2UuZGF0YVswXSkgewogICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlLmRhdGFbMF0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVqZWN0KCk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH07CgogICAgLy9DUk3jga7lpInmlbDjgYvjgolab2hvTElOReOBrkFQSeOCreODvOOCkuWPluW+lwogICAgY29uc3QgZ2V0Wm9ob0NSTVZhcmlhYmxlcyA9IGFwaU5hbWUgPT4gewogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIFpPSE8uQ1JNLkFQSS5nZXRPcmdWYXJpYWJsZShhcGlOYW1lKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICAgIGlmIChyZXNwb25zZS5TdWNjZXNzKSB7CiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UuU3VjY2Vzcy5Db250ZW50KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlamVjdChyZXNwb25zZSk7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH07CgogICAgLy8g44Ot44Kw44Kk44Oz44Om44O844K244O844OH44O844K/44Gu5Y+W5b6XCiAgICBjb25zdCBnZXRDdXJyZW50VXNlciA9ICgpID0+IHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICBaT0hPLkNSTS5DT05GSUcuZ2V0Q3VycmVudFVzZXIoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UudXNlcnNbMF0pOwogICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgICAgICAgcmVqZWN0KGVycik7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH07CiAgICBjb25zdCBzdXBwb3J0Tm90aWZpY2F0aW9uID0gdHlwZSA9PiB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgY29uc3QgZnVuY3Rpb25OYW1lID0gInN1cHBvcnRub3RpZmljYXRpb24iOwogICAgICAgIGNvbnN0IHJlcXVlc3REYXRhID0gewogICAgICAgICAgYXJndW1lbnRzOiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICAgIGN1cnJlbnRVc2VyTmFtZTogY3VycmVudFVzZXIudmFsdWUuZnVsbF9uYW1lLAogICAgICAgICAgICBjb250YWN0TmFtZTogbGluZVVzZXJEYXRhLnZhbHVlLkZ1bGxfTmFtZSwKICAgICAgICAgICAgY29udGFjdElkOiBsaW5lVXNlckRhdGEudmFsdWUuaWQKICAgICAgICAgIH0pCiAgICAgICAgfTsKICAgICAgICBaT0hPLkNSTS5GVU5DVElPTlMuZXhlY3V0ZShmdW5jdGlvbk5hbWUsIHJlcXVlc3REYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH07CgogICAgLy8gTElOReODgeODo+ODg+ODiOODh+ODvOOCv+OBruWPluW+lwogICAgY29uc3QgZ2V0TElORUNoYXREYXRhID0gYXN5bmMgKCkgPT4gewogICAgICBjb25zdCBsaW5lQ2hhdERhdGEgPSBhd2FpdCBaTEMuZ2V0Q2hhdChsaW5lVXNlcklkLnZhbHVlKTsKICAgICAgLy8gY29uc29sZS5sb2cobGluZUNoYXREYXRhKQogICAgICBsZXQgbGluZUNoYXRBcnJheSA9IFtdOwogICAgICBmb3IgKGxldCBjaGF0IG9mIGxpbmVDaGF0RGF0YS5jaGF0cykgewogICAgICAgIGxldCB1cmwgPSBudWxsOwogICAgICAgIGlmIChjaGF0Lm1lZGlhX3VybCkgewogICAgICAgICAgLy8g44K544K/44Oz44OX44Gu5aC05ZCI44Gv44Ki44OJ44Os44K544KS44Gd44Gu44G+44G+5oyH5a6aCiAgICAgICAgICBpZiAoY2hhdC5jaGF0X3R5cGUgPT0gMSkgewogICAgICAgICAgICB1cmwgPSBjaGF0Lm1lZGlhX3VybDsKICAgICAgICAgICAgLy8g44K544K/44Oz44OX5Lul5aSW44Gu5aC05ZCI44GvUzPjga7jg5HjgrnjgpLlj5blvpfjgZfmjIflrpoKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIHVybCA9IFpMQy5nZXRNZWRpYShjaGF0Lm1lZGlhX3VybCkKICAgICAgICAgICAgdXJsID0gWkxDLmdldE1lZGlhKGNoYXQuY2hhdF9pZCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGxpbmVDaGF0QXJyYXkucHVzaCh7CiAgICAgICAgICBjaGF0SWQ6IGNoYXQuY2hhdF9pZCwKICAgICAgICAgIHNwZWFrZXI6IFVTRVJfVFlQRV9PQkpbY2hhdC51c2VyX3R5cGVdLAogICAgICAgICAgdHlwZTogQ0hBVF9UWVBFX09CSltjaGF0LmNoYXRfdHlwZV0sCiAgICAgICAgICBtZXNzYWdlOiBjaGF0LnRleHQsCiAgICAgICAgICAvLyB1cmw6IGNoYXQubWVkaWFfdXJsID8gWkxDLmdldE1lZGlhVVJMKGNoYXQubWVkaWFfdXJsKSA6IG51bGwsCiAgICAgICAgICAvLyB1cmw6IGNoYXQubWVkaWFfdXJsID8gWkxDLmdldE1lZGlhKGNoYXQubWVkaWFfdXJsKSA6IG51bGwsCiAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgIHRpbWVzdGFtcDogY2hhdC5zZW50X2F0LAogICAgICAgICAgaXNGaXJzdExvYWQ6IHRydWUKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZygiTElOReWPluW+lyIpOwogICAgICAgIGNvbnNvbGUubG9nKGNoYXQuc2VudF9hdCk7CiAgICAgICAgdXBkYXRlQ2hhdFJlYWRUaW1lKGNoYXQuc2VudF9hdCk7CiAgICAgIH0KICAgICAgdXBkYXRlQ2hhdExvZ3MobGluZUNoYXRBcnJheSk7CiAgICB9OwogICAgLy8g5paw6KaPTElOReODgeODo+ODg+ODiOODh+ODvOOCv+OBruWPluW+lwogICAgY29uc3QgZ2V0TmV3TElORUNoYXREYXRhID0gYXN5bmMgKCkgPT4gewogICAgICBjb25zdCBsaW5lQ2hhdERhdGEgPSBhd2FpdCBaTEMuZ2V0TmV3Q2hhdChsaW5lVXNlcklkLnZhbHVlLCBsYXN0X3JlYWRfdGltZS52YWx1ZSk7CiAgICAgIGxldCBsaW5lQ2hhdEFycmF5ID0gY2hhdExvZ3MudmFsdWU7CiAgICAgIGZvciAobGV0IGNoYXQgb2YgbGluZUNoYXREYXRhLmNoYXRzKSB7CiAgICAgICAgbGV0IHVybCA9IG51bGw7CiAgICAgICAgaWYgKGNoYXQubWVkaWFfdXJsKSB7CiAgICAgICAgICAvLyDjgrnjgr/jg7Pjg5fjga7loLTlkIjjga/jgqLjg4njg6zjgrnjgpLjgZ3jga7jgb7jgb7mjIflrpoKICAgICAgICAgIGlmIChjaGF0LmNoYXRfdHlwZSA9PSAxKSB7CiAgICAgICAgICAgIHVybCA9IGNoYXQubWVkaWFfdXJsOwogICAgICAgICAgICAvLyDjgrnjgr/jg7Pjg5fku6XlpJbjga7loLTlkIjjga9TM+OBruODkeOCueOCkuWPluW+l+OBl+aMh+WumgogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gdXJsID0gWkxDLmdldE1lZGlhKGNoYXQubWVkaWFfdXJsKQogICAgICAgICAgICB1cmwgPSBaTEMuZ2V0TWVkaWEoY2hhdC5jaGF0X2lkKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgbGluZUNoYXRBcnJheS5wdXNoKHsKICAgICAgICAgIGNoYXRJZDogY2hhdC5jaGF0X2lkLAogICAgICAgICAgc3BlYWtlcjogVVNFUl9UWVBFX09CSltjaGF0LnVzZXJfdHlwZV0sCiAgICAgICAgICB0eXBlOiBDSEFUX1RZUEVfT0JKW2NoYXQuY2hhdF90eXBlXSwKICAgICAgICAgIG1lc3NhZ2U6IGNoYXQudGV4dCwKICAgICAgICAgIC8vIHVybDogY2hhdC5tZWRpYV91cmwgPyBaTEMuZ2V0TWVkaWEoY2hhdC5tZWRpYV91cmwpIDogbnVsbCwKICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgdGltZXN0YW1wOiBjaGF0LnNlbnRfYXQsCiAgICAgICAgICBpc0ZpcnN0TG9hZDogZmFsc2UKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZygi5paw6KaPTElOReWPluW+lyIpOwogICAgICAgIGNvbnNvbGUubG9nKGNoYXQuc2VudF9hdCk7CiAgICAgICAgdXBkYXRlQ2hhdFJlYWRUaW1lKGNoYXQuc2VudF9hdCk7CiAgICAgIH0KICAgICAgdXBkYXRlQ2hhdExvZ3MobGluZUNoYXRBcnJheSk7CiAgICAgIGlmIChpc0JvdHRvbVNjcm9sbFBvc2l0aW9uLnZhbHVlID09PSBmYWxzZSkgewogICAgICAgIG5ld01lc3NhZ2VDb3VudC52YWx1ZSA9IG5ld01lc3NhZ2VDb3VudC52YWx1ZSArIGxpbmVDaGF0RGF0YS5jaGF0cy5sZW5ndGg7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV3TWVzc2FnZUNvdW50LnZhbHVlID0gMDsKICAgICAgfQogICAgfTsKICAgIC8vIOmBjuWOu0xJTkXjg4Hjg6Pjg4Pjg4jjg4fjg7zjgr/jga7lj5blvpcKICAgIGNvbnN0IGdldE9sZExJTkVDaGF0RGF0YSA9IGFzeW5jICgpID0+IHsKICAgICAgLy8g44OB44Oj44OD44OI5Y+W5b6X5YmN44Gu44OB44Oj44OD44OI6KGo56S644Ko44Oq44Ki44Gu6auY44GV44KS5L+d5a2YCiAgICAgIGNvbnRlbnRTY3JvbGxQb3NpdGlvbi52YWx1ZSA9IGNvbnRlbnQudmFsdWUuJGVsLnBhcmVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0OwogICAgICAvLyBjb25zb2xlLmxvZygiZ2V0T2xkTElORUNoYXREYXRhIiwgY29udGVudFNjcm9sbFBvc2l0aW9uLnZhbHVlKQogICAgICBjb25zdCBsaW5lQ2hhdERhdGEgPSBhd2FpdCBaTEMuZ2V0T2xkQ2hhdChsaW5lVXNlcklkLnZhbHVlLCBvbGRlc3RfY2hhdF90aW1lLnZhbHVlLCAxMCk7CiAgICAgIGxldCBsaW5lQ2hhdEFycmF5ID0gY2hhdExvZ3MudmFsdWU7CiAgICAgIGZvciAobGV0IGNoYXQgb2YgbGluZUNoYXREYXRhLmNoYXRzKSB7CiAgICAgICAgbGV0IHVybCA9IG51bGw7CiAgICAgICAgaWYgKGNoYXQubWVkaWFfdXJsKSB7CiAgICAgICAgICAvLyDjgrnjgr/jg7Pjg5fjga7loLTlkIjjga/jgqLjg4njg6zjgrnjgpLjgZ3jga7jgb7jgb7mjIflrpoKICAgICAgICAgIGlmIChjaGF0LmNoYXRfdHlwZSA9PSA0KSB7CiAgICAgICAgICAgIHVybCA9IGNoYXQubWVkaWFfdXJsOwogICAgICAgICAgICAvLyDjgrnjgr/jg7Pjg5fku6XlpJbjga7loLTlkIjjga9TM+OBruODkeOCueOCkuWPluW+l+OBl+aMh+WumgogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gdXJsID0gWkxDLmdldE1lZGlhKGNoYXQubWVkaWFfdXJsKQogICAgICAgICAgICB1cmwgPSBaTEMuZ2V0TWVkaWEoY2hhdC5jaGF0X2lkKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgbGluZUNoYXRBcnJheS5wdXNoKHsKICAgICAgICAgIGNoYXRJZDogY2hhdC5jaGF0X2lkLAogICAgICAgICAgc3BlYWtlcjogVVNFUl9UWVBFX09CSltjaGF0LnVzZXJfdHlwZV0sCiAgICAgICAgICB0eXBlOiBDSEFUX1RZUEVfT0JKW2NoYXQuY2hhdF90eXBlXSwKICAgICAgICAgIG1lc3NhZ2U6IGNoYXQudGV4dCwKICAgICAgICAgIC8vIHVybDogY2hhdC5tZWRpYV91cmwgPyBaTEMuZ2V0TWVkaWEoY2hhdC5tZWRpYV91cmwpIDogbnVsbCwKICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgdGltZXN0YW1wOiBjaGF0LnNlbnRfYXQsCiAgICAgICAgICBpc0ZpcnN0TG9hZDogZmFsc2UKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZygi6YGO5Y67TElOReWPluW+lyIpOwogICAgICAgIGNvbnNvbGUubG9nKGNoYXQuc2VudF9hdCk7CiAgICAgICAgdXBkYXRlQ2hhdFJlYWRUaW1lKGNoYXQuc2VudF9hdCk7CiAgICAgIH0KICAgICAgdXBkYXRlQ2hhdExvZ3MobGluZUNoYXRBcnJheSk7CiAgICB9OwogICAgY29uc3QgdG9nZ2xlQXV0b1JlbG9hZCA9IGlzQXV0b1JlbG9hZCA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCJ0b2dnbGVBdXRvUmVsb2FkIik7CiAgICAgIGlmIChpc0F1dG9SZWxvYWQgJiYgYXV0b1JlbG9hZElkLnZhbHVlID09IG51bGwpIHsKICAgICAgICAvLyA25pmC6ZaT5b6M44Gr6Ieq5YuV5pu05paw44KS44Kq44OVCiAgICAgICAgYXV0b1JlbG9hZExpbWl0VGltZS52YWx1ZSA9IGRheWpzKCkuYWRkKDYsICdoJyk7CiAgICAgICAgYXV0b1JlbG9hZElkLnZhbHVlID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4gewogICAgICAgICAgaWYgKGlzRmlyc3RHZXRDaGF0RGF0YS52YWx1ZSkgewogICAgICAgICAgICBpc0ZpcnN0R2V0Q2hhdERhdGEudmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgYXdhaXQgZ2V0TElORUNoYXREYXRhKCk7CiAgICAgICAgICB9IGVsc2UgaWYgKGRheWpzKCkuaXNCZWZvcmUoYXV0b1JlbG9hZExpbWl0VGltZS52YWx1ZSkpIHsKICAgICAgICAgICAgYXdhaXQgZ2V0TmV3TElORUNoYXREYXRhKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBoZWFkZXIudmFsdWUuc3RvcEF1dG9SZWxvYWQoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBBVVRPX1JFTE9BRF9JTlRFUlZBTCk7CiAgICAgIH0gZWxzZSBpZiAoIWlzQXV0b1JlbG9hZCAmJiBhdXRvUmVsb2FkSWQudmFsdWUgIT0gbnVsbCkgewogICAgICAgIGNsZWFyVGltZW91dChhdXRvUmVsb2FkSWQudmFsdWUpOwogICAgICAgIGF1dG9SZWxvYWRJZC52YWx1ZSA9IG51bGw7CiAgICAgICAgYXV0b1JlbG9hZExpbWl0VGltZS52YWx1ZSA9IG51bGw7CiAgICAgIH0KICAgIH07CiAgICAvLyDjg4Hjg6Pjg4Pjg4jooajnpLrjgqjjg6rjgqLjga7jgrnjgq/jg63jg7zjg6vjg4/jg7Pjg4njg6sKICAgIGNvbnN0IGhhbmRsZVNjcm9sbCA9ICgpID0+IHsKICAgICAgY29uc3QgdGFyZ2V0ID0gY29udGVudC52YWx1ZS4kZWwucGFyZW50RWxlbWVudDsKICAgICAgY29udGVudFNjcm9sbFBvc2l0aW9uLnZhbHVlID0gbnVsbDsKICAgICAgaWYgKHRhcmdldC5zY3JvbGxUb3AgKyB0YXJnZXQuY2xpZW50SGVpZ2h0ID09IHRhcmdldC5zY3JvbGxIZWlnaHQpIHsKICAgICAgICBpc0JvdHRvbVNjcm9sbFBvc2l0aW9uLnZhbHVlID0gdHJ1ZTsKICAgICAgICBuZXdNZXNzYWdlQ291bnQudmFsdWUgPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIGlzQm90dG9tU2Nyb2xsUG9zaXRpb24udmFsdWUgPSBmYWxzZTsKICAgICAgfQogICAgfTsKCiAgICAvLyBjaGF0TG9nc+OBruabtOaWsAogICAgY29uc3QgdXBkYXRlQ2hhdExvZ3MgPSBsaW5lQ2hhdEFycmF5ID0+IHsKICAgICAgY2hhdExvZ3MudmFsdWUgPSBsaW5lQ2hhdEFycmF5LnNvcnQoKHgsIHkpID0+IHsKICAgICAgICBpZiAoeC5jaGF0SWQgPCB5LmNoYXRJZCkgcmV0dXJuIC0xOwogICAgICAgIGlmICh4LmNoYXRJZCA+IHkuY2hhdElkKSByZXR1cm4gMTsKICAgICAgICByZXR1cm4gMDsKICAgICAgfSk7CiAgICAgIGxldCBzZW50RGF0ZSA9IGRheWpzKDApOwogICAgICBjaGF0TG9ncy52YWx1ZS5mb3JFYWNoKChjaGF0TG9nLCBpKSA9PiB7CiAgICAgICAgaWYgKHNlbnREYXRlLmlzQmVmb3JlKGRheWpzKGNoYXRMb2dzLnZhbHVlW2ldLnRpbWVzdGFtcC5zcGxpdCgiICIpWzBdLCAiWVlZWS1NTS1ERCIpKSkgewogICAgICAgICAgc2VudERhdGUgPSBkYXlqcyhjaGF0TG9ncy52YWx1ZVtpXS50aW1lc3RhbXAuc3BsaXQoIiAiKVswXSwgIllZWVktTU0tREQiKTsKICAgICAgICAgIGNoYXRMb2dzLnZhbHVlW2ldLmlzVmlld0RhdGUgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjaGF0TG9ncy52YWx1ZVtpXS5pc1ZpZXdEYXRlID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgLy8gY29uc29sZS5sb2coY2hhdExvZ3MpCiAgICB9OwoKICAgIC8vIOaWsOimj+ODgeODo+ODg+ODiOOAgemBjuWOu+ODgeODo+ODg+ODiOWPluW+l+OBruOBn+OCgeOBruaZgumWk+OBruabtOaWsAogICAgY29uc3QgdXBkYXRlQ2hhdFJlYWRUaW1lID0gc2VudF9hdCA9PiB7CiAgICAgIGlmIChkYXlqcyhvbGRlc3RfY2hhdF90aW1lLnZhbHVlLCAiWVlZWS1NTS1ERCBISDptbTpzcy5TU1MiKS5pc0FmdGVyKGRheWpzKHNlbnRfYXQsICJZWVlZLU1NLUREIEhIOm1tOnNzLlNTUyIpKSkgewogICAgICAgIG9sZGVzdF9jaGF0X3RpbWUudmFsdWUgPSBzZW50X2F0OwogICAgICB9CiAgICAgIGlmIChkYXlqcyhsYXN0X3JlYWRfdGltZS52YWx1ZSwgIllZWVktTU0tREQgSEg6bW06c3MuU1NTIikuaXNCZWZvcmUoZGF5anMoc2VudF9hdCwgIllZWVktTU0tREQgSEg6bW06c3MuU1NTIikpKSB7CiAgICAgICAgbGFzdF9yZWFkX3RpbWUudmFsdWUgPSBzZW50X2F0OwogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKG9sZGVzdF9jaGF0X3RpbWUudmFsdWUpOwogICAgfTsKCiAgICAvLyBMSU5F44OB44Oj44OD44OI6KGo56S644Ko44Oq44Ki44Gu6Ieq5YuV44K544Kv44Ot44O844OrCiAgICAvLyAt6YGO5Y6744Gu44OB44Oj44OD44OI6Kqt44G/6L6844G/5pmC44Gv44K544Kv44Ot44O844Or5L2N572u5Zu65a6aCiAgICAvLyAt5pyA5paw44OB44Oj44OD44OI6Kqt44G/6L6844G/5pmC44Gv5LiA55Wq5LiL44G+44Gn44K544Kv44Ot44O844OrCiAgICBjb25zdCBjb250ZW50U2Nyb2xsID0gKGlzRmlyc3RMb2FkID0gZmFsc2UpID0+IHsKICAgICAgaWYgKGNvbnRlbnQudmFsdWUpIHsKICAgICAgICBjb25zdCB0YXJnZXQgPSBjb250ZW50LnZhbHVlLiRlbC5wYXJlbnRFbGVtZW50OwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgaWYgKGlzRmlyc3RMb2FkKSB7CiAgICAgICAgICAgIHRhcmdldC5zY3JvbGxUb3AgPSB0YXJnZXQuc2Nyb2xsSGVpZ2h0OwogICAgICAgICAgfSBlbHNlIGlmIChjb250ZW50U2Nyb2xsUG9zaXRpb24udmFsdWUgIT0gbnVsbCkgewogICAgICAgICAgICB0YXJnZXQuc2Nyb2xsVG9wID0gdGFyZ2V0LnNjcm9sbEhlaWdodCAtIGNvbnRlbnRTY3JvbGxQb3NpdGlvbi52YWx1ZTsKICAgICAgICAgIH0gZWxzZSBpZiAoaXNCb3R0b21TY3JvbGxQb3NpdGlvbi52YWx1ZSA9PSBudWxsIHx8IGlzQm90dG9tU2Nyb2xsUG9zaXRpb24udmFsdWUgPT0gdHJ1ZSkgewogICAgICAgICAgICB0YXJnZXQuc2Nyb2xsVG9wID0gdGFyZ2V0LnNjcm9sbEhlaWdodDsKICAgICAgICAgIH0KICAgICAgICB9LCAwKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IGdldFRlcm1pbmFsID0gKCkgPT4gewogICAgICBpZiAod2luZG93Lm91dGVyV2lkdGggPiB3aW5kb3cub3V0ZXJIZWlnaHQpIHsKICAgICAgICB0ZXJtaW5hbC52YWx1ZSA9ICJwYyI7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGVybWluYWwudmFsdWUgPSAic3AiOwogICAgICB9CiAgICB9OwogICAgY29uc3Qgb3BlblByZXZpZXcgPSAodGFnLCBzcmMpID0+IHsKICAgICAgcHJldmlld0luZm8uaXNTaG93ID0gdHJ1ZTsKICAgICAgcHJldmlld0luZm8udGFnID0gdGFnOwogICAgICBwcmV2aWV3SW5mby5zcmMgPSBzcmM7CiAgICB9OwogICAgY29uc3QgY2xvc2VQcmV2aWV3ID0gKCkgPT4gewogICAgICBwcmV2aWV3SW5mby5pc1Nob3cgPSBmYWxzZTsKICAgIH07CiAgICBjb25zdCBzaG93QWxlcnQgPSAodHlwZSwgbXNnKSA9PiB7CiAgICAgIGlmICh0eXBlKSB7CiAgICAgICAgYWxlcnRMaXN0LnZhbHVlLnB1c2goewogICAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICAgIG1zZzogbXNnCiAgICAgICAgfSk7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBhbGVydExpc3QudmFsdWUuc2hpZnQoKTsKICAgICAgICB9LCAyNTAwKTsKICAgICAgfQogICAgfTsKICAgIGNvbnN0IHNjcm9sbEJvdHRvbSA9ICgpID0+IHsKICAgICAgaWYgKGNvbnRlbnQudmFsdWUpIHsKICAgICAgICBjb25zdCB0YXJnZXQgPSBjb250ZW50LnZhbHVlLiRlbC5wYXJlbnRFbGVtZW50OwogICAgICAgIHRhcmdldC5zY3JvbGxUb3AgPSB0YXJnZXQuc2Nyb2xsSGVpZ2h0OwogICAgICB9CiAgICB9OwogICAgY29uc3QgZ2V0QmxvY2tGbGcgPSBhc3luYyAoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGxpbmVVc2VySWQudmFsdWUpOwogICAgICByZXR1cm4gYXdhaXQgWkxDLmdldEJsb2NrRmxnKGxpbmVVc2VySWQudmFsdWUpLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgICB9KTsKICAgIH07CiAgICBjb25zdCBzZXRCbG9ja0ZsZyA9IGFzeW5jICgpID0+IHsKICAgICAgY29uc29sZS5sb2cobGluZVVzZXJJZC52YWx1ZSk7CiAgICAgIGJsb2NrX3N0YXR1cy52YWx1ZSA9ICFibG9ja19zdGF0dXMudmFsdWU7CiAgICAgIGNvbnNvbGUubG9nKCLjg5bjg63jg4Pjgq/jgrnjg4bjg7zjgr/jgrnvvJoiLCBibG9ja19zdGF0dXMudmFsdWUpOwogICAgICBhd2FpdCBaTEMuc2V0QmxvY2tGbGcobGluZVVzZXJJZC52YWx1ZSwgYmxvY2tfc3RhdHVzLnZhbHVlKS5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgfSk7CiAgICAgIGlmIChibG9ja19zdGF0dXMudmFsdWUpIHsKICAgICAgICBzaG93QWxlcnQoInN1Y2Nlc3MiLCAi44OW44Ot44OD44Kv44GX44G+44GX44Gf44CCIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2hvd0FsZXJ0KCJzdWNjZXNzIiwgIuODluODreODg+OCr+ino+mZpOOBl+OBvuOBl+OBn+OAgiIpOwogICAgICB9CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgaGVhZGVyLAogICAgICBjb250ZW50LAogICAgICBjaGF0TG9ncywKICAgICAgc2VuZENoYXQsCiAgICAgIGdldE5ld0xJTkVDaGF0RGF0YSwKICAgICAgZ2V0T2xkTElORUNoYXREYXRhLAogICAgICB0b2dnbGVBdXRvUmVsb2FkLAogICAgICBjb250ZW50U2Nyb2xsLAogICAgICBoYW5kbGVTY3JvbGwsCiAgICAgIGlzTG9hZGVkLAogICAgICB0ZXJtaW5hbCwKICAgICAgcHJldmlld0luZm8sCiAgICAgIG9wZW5QcmV2aWV3LAogICAgICBjbG9zZVByZXZpZXcsCiAgICAgIGFsZXJ0TGlzdCwKICAgICAgc2hvd0FsZXJ0LAogICAgICBzdXBwb3J0Tm90aWZpY2F0aW9uLAogICAgICBuZXdNZXNzYWdlQ291bnQsCiAgICAgIHNjcm9sbEJvdHRvbSwKICAgICAgYmxvY2tfc3RhdHVzLAogICAgICBnZXRCbG9ja0ZsZywKICAgICAgc2V0QmxvY2tGbGcKICAgIH07CiAgfQp9Ow=="},{"version":3,"names":["ref","reactive","onMounted","onBeforeUnmount","watchEffect","useRouter","ZohoLINE","Header","Balloon","Footer","Preview","LoadingSpinner","Alert","dayjs","locale","name","components","setup","console","log","USER_TYPE_OBJ","CHAT_TYPE_OBJ","AUTO_RELOAD_INTERVAL","ZLC","ZOHO","window","router","isLoaded","currentUser","lineUserData","lineUserId","chatLogs","last_read_time","oldest_chat_time","format","companyId","channelId","apiKey","header","content","contentScrollPosition","isBottomScrollPosition","isFirstGetChatData","autoReloadId","autoReloadLimitTime","terminal","alertList","previewInfo","isShow","tag","src","newMessageCount","block_status","contentScroll","flush","appElement","document","getElementById","getTerminal","addEventListener","embeddedApp","on","data","classList","add","dataset","entity","Entity","entityId","EntityId","initialize","init","contains","value","clearTimeout","removeEventListener","getZohoCustomerId","LINE_ID","zohoLineConfig","getZohoCRMVariables","apiKeys","zoho_line_company_id","Error","zoho_line_api_key","zoho_line_channel_id","userData","getBlockFlg","getCurrentUser","supportNotification","toggleAutoReload","err","error","push","params","message","sendChat","type","file","catch","responseJSON","showAlert","sendStickerChat","sendImageChat","sendVideoChat","sendAudioChat","sendPdfChat","recordId","Promise","resolve","reject","CRM","API","getRecord","RecordID","then","response","apiName","getOrgVariable","Success","Content","CONFIG","users","functionName","requestData","arguments","JSON","stringify","currentUserName","full_name","contactName","Full_Name","contactId","id","FUNCTIONS","execute","getLINEChatData","lineChatData","getChat","lineChatArray","chat","chats","url","media_url","chat_type","getMedia","chat_id","chatId","speaker","user_type","text","timestamp","sent_at","isFirstLoad","updateChatReadTime","updateChatLogs","getNewLINEChatData","getNewChat","length","getOldLINEChatData","$el","parentElement","scrollHeight","getOldChat","isAutoReload","setInterval","isBefore","stopAutoReload","handleScroll","target","scrollTop","clientHeight","sort","x","y","sentDate","forEach","chatLog","i","split","isViewDate","isAfter","setTimeout","outerWidth","outerHeight","openPreview","closePreview","msg","shift","scrollBottom","setBlockFlg"],"sources":["C:\\Users\\m.ebisu\\Desktop\\zl_connect\\src\\views\\Main.vue"],"sourcesContent":["<template>\n<transition name=\"fade\">\n  <div v-if=\"!isLoaded\" id=\"loading-window\">\n    <LoadingSpinner/>\n  </div>\n</transition>\n<div class=\"main h-100 w-100 d-flex flex-column\">\n  <Header ref=\"header\" :block_status=\"block_status\" :reload=\"getNewLINEChatData\" :supportNotification=\"supportNotification\" :toggleAutoReload=\"toggleAutoReload\" :setBlockFlg=\"setBlockFlg\" :getBlockFlg=\"getBlockFlg\"></Header>\n  <div class=\"content d-flex flex-column flex-fill border-top border-bottom overflow-auto\" :class=\"terminal\" @scroll=\"handleScroll\">\n    <div :class=\"{'d-none': chatLogs.length == 0}\">\n      <button class=\"btn btn-outline-accent mt-2\" @click=\"getOldLINEChatData\">過去チャットの取得</button>\n    </div>\n    <Balloon\n      ref=\"content\"\n      v-for=\"chat in chatLogs\"\n      v-bind:key=\"chat.chatId\"\n      :chatId=\"chat.chatId\"\n      :type=\"chat.type\"\n      :speaker=\"chat.speaker\"\n      :message=\"chat.message\"\n      :url=\"chat.url\"\n      :timestamp=\"chat.timestamp\"\n      :isFirstLoad=\"chat.isFirstLoad\"\n      :isViewDate=\"chat.isViewDate\"\n      :contentScroll=\"contentScroll\"\n      :openPreview=\"openPreview\"></Balloon>\n  </div>\n  <Footer :sendChat=\"sendChat\"></Footer>\n  <Preview v-show=\"previewInfo.isShow\" :closePreview=\"closePreview\" :class=\"terminal\" :type=\"previewInfo.tag\" :src=\"previewInfo.src\" />\n  <!-- アラート表示 -->\n  <div id=\"alert-wrapper\">\n    <transition-group name=\"alert-fade\" tag=\"Alert\" class=\"w-75\">\n      <div v-for=\"(alertConfig, index) in alertList\" :key=\"index\" class=\"w-100\">\n        <Alert :class=\"index\" :type=\"alertConfig.type\" :msg=\"alertConfig.msg\" />\n      </div>\n    </transition-group>\n  </div>\n  <!-- 新規メッセージ通知 -->\n  <div v-if=\"newMessageCount > 0\" id=\"new-message-button-wrapper\">\n    <button class=\"btn btn-sm\" @click=\"scrollBottom\">{{ newMessageCount }}件の新規メッセージ</button>\n  </div>\n</div>\n</template>\n\n<script>\nimport { ref, reactive, onMounted, onBeforeUnmount, watchEffect } from 'vue';\nimport { useRouter } from 'vue-router';\n\nimport ZohoLINE from '../lib/ZohoLINE.js';\n\nimport Header from '../components/Header.vue';\nimport Balloon from '../components/Balloon.vue';\nimport Footer from '../components/Footer.vue';\n\nimport Preview from '../components/Preview.vue';\nimport LoadingSpinner from '../components/LoadingSpinner.vue';\nimport Alert from '../components/Alert.vue';\n\nimport dayjs from 'dayjs';\nimport 'dayjs/locale/ja';\ndayjs.locale('ja');\n\nexport default {\n  name: 'Main',\n  components: {\n    Header,\n    Balloon,\n    Footer,\n    LoadingSpinner,\n    Preview,\n    Alert\n  },\n  setup() {\n    console.log(\"setup\");\n    const USER_TYPE_OBJ = {\n      0: \"right\",\n      1: \"left\"\n    };\n    const CHAT_TYPE_OBJ = {\n      0: \"text\",\n      1: \"sticker\",     // スタンプ\n      2: \"image\",       // 画像\n      3: \"video\",       // 動画\n      4: \"audio\",       // 音声\n      5: \"application\"  // PDF\n    };\n    const AUTO_RELOAD_INTERVAL = 1 * 1000;\n    // ZohoLINEクラス\n    let ZLC = null;\n    // Zohoプラグイン\n    const ZOHO = window.ZOHO;\n    // vue-router\n    const router = useRouter();\n    // 読み込みフラグ\n    const isLoaded = ref(false);\n    // Zoho CRMログインユーザーデータ\n    const currentUser = ref(\"\");\n    // Zohoレコードデータ\n    const lineUserData = ref(\"\");\n    // 顧客ID\n    const lineUserId = ref(\"\");\n    // LINEチャットログ\n    const chatLogs = ref([]);\n    //LINE既読時間\n    const last_read_time = ref(\"0\");\n    //取得した一番古いLINEチャットの時間\n    const oldest_chat_time = ref(dayjs().format(\"YYYY-MM-DD HH:mm:ss.SSS\"));\n    // ZohoLINEの契約企業ID\n    const companyId = ref('');\n    // ZohoLINEのチャンネルID\n    const channelId = ref('');\n    // ZohoLINEのAPIキー\n    const apiKey = ref('');\n    //ヘッダーのDOM\n    const header = ref(null);\n    //チャット表示エリアのDOM\n    const content = ref(null);\n    //チャット表示エリアのスクロール位置\n    const contentScrollPosition = ref(null);\n    //スクロール位置が一番下であるか\n    const isBottomScrollPosition = ref(null);\n    // 最初のチャットデータ取得フラグ\n    const isFirstGetChatData = ref(true);\n    // 自動更新を行うsetIntervalのID\n    const autoReloadId = ref(null);\n    // 自動更新の自動停止時間(自動更新開始から６時間後に自動停止) dayjsオブジェクト\n    const autoReloadLimitTime = ref(null);\n    // 端末の識別用変数\n    const terminal = ref(\"pc\");\n    // アラート表示用変数\n    const alertList = ref([]);\n    // コンテンツプレビュー用変数\n    const previewInfo = reactive({\n      isShow: false,\n      tag: \"img\",\n      src: \"\"\n    });\n    // 新規メッセージ未表示件数\n    const newMessageCount = ref(0);\n    // ブロックフラグ\n    const block_status = ref(false);\n\n    watchEffect(\n      () => {\n        contentScroll();\n      },\n      {\n        flush: 'post'\n      }\n    );\n\n    onMounted(async () => {\n      console.log(\"onMounted\");\n      const appElement = document.getElementById(\"app\");\n      getTerminal();\n      window.addEventListener('resize', getTerminal);\n      //Zohoプラグインの初期化完了時\n      ZOHO.embeddedApp.on(\"PageLoad\", (data) => {\n        appElement.classList.add('loaded');\n        appElement.dataset.entity = data.Entity;\n        appElement.dataset.entityId = data.EntityId;\n        // ZohoLINEの必要なデータの取得\n        initialize(data);\n      });\n      //Zohoプラグインの初期化\n      ZOHO.embeddedApp.init();\n      if(appElement.classList.contains('loaded')){\n        initialize({\n          Entity: appElement.dataset.entity,\n          EntityId: appElement.dataset.entityId\n        });\n      }\n    });\n\n    onBeforeUnmount(() => {\n      console.log(\"onBeforeUnmount\")\n      if(autoReloadId.value != null){\n        clearTimeout(autoReloadId.value);\n        autoReloadId.value = null;\n      }\n      window.removeEventListener('resize', getTerminal);\n    });\n\n    const initialize = async (data) => {\n      try {\n        isFirstGetChatData.value = true;\n        //LINEユーザーデータの取得\n        lineUserData.value = await getZohoCustomerId(data.Entity, data.EntityId);\n        lineUserId.value = lineUserData.value.LINE_ID;\n        // ZohoLINEのAPIキーの取得\n        const zohoLineConfig = await getZohoCRMVariables({apiKeys:[\"zoho_line_api_key\", \"zoho_line_company_id\", \"zoho_line_channel_id\"]});\n        if(zohoLineConfig.zoho_line_company_id.value){\n          companyId.value = zohoLineConfig.zoho_line_company_id.value;\n        }else{\n          throw new Error(\"契約企業IDが見つかりませんでした\");\n        }\n        if(zohoLineConfig.zoho_line_api_key.value){\n          apiKey.value = zohoLineConfig.zoho_line_api_key.value;\n        }else{\n          throw new Error(\"ZohoLINE APIキーが見つかりませんでした\");\n        }\n        if(zohoLineConfig.zoho_line_channel_id.value){\n          channelId.value = zohoLineConfig.zoho_line_channel_id.value;\n        }else{\n          throw new Error(\"ZohoLINE チャンネルIDが見つかりませんでした\");\n        }\n        ZLC = new ZohoLINE(companyId.value, channelId.value, apiKey.value);\n        // ブロックステータスの取得\n        const userData = await ZLC.getBlockFlg(lineUserId.value);\n        block_status.value = userData.block_status;\n        console.log(\"ブロックステータス：\",block_status.value);\n        currentUser.value = await getCurrentUser();\n        await supportNotification(\"start\");\n        toggleAutoReload(false);\n        toggleAutoReload(true);\n        isLoaded.value = true;\n      } catch (err) {\n        console.error(err);\n        router.push({name: 'Error', params: { message: err.message }});\n      }\n    };\n\n    const sendChat = async (message, type, file=null) => {\n      // メッセージ送信\n      if (type == \"text\") {\n        await ZLC.sendChat(lineUserId.value, message).catch((err) => {\n          console.error(err);\n          if(err.responseJSON.type == \"Remaining\" ){\n            showAlert(\"danger\", \"送信上限数を超えたため、送信に失敗しました。\");\n          } else {\n            showAlert(\"danger\", \"メッセージの送信に失敗しました\");\n          }\n        });\n      // スタンプ送信\n      }else if(type == \"sticker\"){\n        await ZLC.sendStickerChat(lineUserId.value, message).catch((err) => {\n          console.error(err);\n          if(err.responseJSON.type == \"Remaining\" ){\n            showAlert(\"danger\", \"送信上限数を超えたため、送信に失敗しました。\");\n          } else {\n            showAlert(\"danger\", \"スタンプの送信に失敗しました\");\n          }\n        });\n      // 画像送信\n      }else if(type == \"image\"){\n        await ZLC.sendImageChat(lineUserId.value, file).catch((err) => {\n          console.error(err);\n          if(err.responseJSON.type == \"Remaining\" ){\n            showAlert(\"danger\", \"送信上限数を超えたため、送信に失敗しました。\");\n          } else {\n            showAlert(\"danger\", \"画像の送信に失敗しました\");\n          }\n        });\n      // 動画送信\n      }else if(type == \"video\"){\n        await ZLC.sendVideoChat(lineUserId.value, file).catch((err) => {\n          console.error(err);\n          if(err.responseJSON.type == \"Remaining\" ){\n            showAlert(\"danger\", \"送信上限数を超えたため、送信に失敗しました。\");\n          } else {\n            showAlert(\"danger\", \"動画の送信に失敗しました\");\n          }\n        });\n      // 音声送信\n      }else if(type == \"audio\"){\n        await ZLC.sendAudioChat(lineUserId.value, file).catch((err) => {\n          console.error(err);\n          if(err.responseJSON.type == \"Remaining\" ){\n            showAlert(\"danger\", \"送信上限数を超えたため、送信に失敗しました。\");\n          } else {\n            showAlert(\"danger\", \"音声の送信に失敗しました\");\n          }\n        });\n      // PDF送信\n      }else if(type == \"application\"){\n        await ZLC.sendPdfChat(lineUserId.value, file).catch((err) => {\n          console.error(err);\n          if(err.responseJSON.type == \"Remaining\" ){\n            showAlert(\"danger\", \"送信上限数を超えたため、送信に失敗しました。\");\n          } else {\n            showAlert(\"danger\", \"PDFの送信に失敗しました\");\n          }\n        });\n      }\n      isBottomScrollPosition.value = null;\n      // await getNewLINEChatData();\n    };\n\n    // LINE連携済みの顧客IDの取得\n    const getZohoCustomerId = (entity, recordId) => {\n      return new Promise((resolve, reject) => {\n        ZOHO.CRM.API.getRecord({\n          Entity: entity,\n          RecordID: recordId\n        }).then((response) => {\n          // console.log(response);\n          if (response.data && response.data[0]) {\n            resolve(response.data[0]);\n          } else {\n            reject();\n          }\n        }).catch((err) => {\n          reject(err);\n        });\n      });\n    };\n\n    //CRMの変数からZohoLINEのAPIキーを取得\n    const getZohoCRMVariables = (apiName) => {\n      return new Promise((resolve, reject) => {\n        ZOHO.CRM.API.getOrgVariable(apiName).then((response) => {\n          console.log(response);\n          if (response.Success) {\n            resolve(response.Success.Content);\n          } else {\n            reject(response);\n          }\n        }).catch((err) => {\n          console.error(err);\n          reject(err);\n        });\n      });\n    };\n\n    // ログインユーザーデータの取得\n    const getCurrentUser = () => {\n      return new Promise((resolve, reject) => {\n        ZOHO.CRM.CONFIG.getCurrentUser().then((response) => {\n          try{\n            resolve(response.users[0]);\n          }catch(err){\n            console.error(err);\n            reject(err);\n          }\n        }).catch((err) => {\n          console.error(err);\n          reject(err);\n        });\n      });\n    };\n\n    const supportNotification = (type) => {\n      return new Promise((resolve, reject) => {\n        const functionName = \"supportnotification\";\n        const requestData = {\n          arguments: JSON.stringify({\n            type: type,\n            currentUserName: currentUser.value.full_name,\n            contactName: lineUserData.value.Full_Name,\n            contactId: lineUserData.value.id\n          })\n        };\n        ZOHO.CRM.FUNCTIONS.execute(functionName, requestData).then(function(response){\n          resolve(response);\n        }).catch((err) => {\n          console.error(err);\n          reject(err);\n        });\n      });\n    };\n\n    // LINEチャットデータの取得\n    const getLINEChatData = async () => {\n      const lineChatData = await ZLC.getChat(lineUserId.value);\n      // console.log(lineChatData)\n      let lineChatArray = [];\n      for (let chat of lineChatData.chats) {\n        let url = null;\n        if(chat.media_url){\n          // スタンプの場合はアドレスをそのまま指定\n          if(chat.chat_type == 1){\n              url = chat.media_url;\n          // スタンプ以外の場合はS3のパスを取得し指定\n          } else {\n              // url = ZLC.getMedia(chat.media_url)\n              url = ZLC.getMedia(chat.chat_id);\n          }\n        }\n\n        lineChatArray.push({\n          chatId: chat.chat_id,\n          speaker: USER_TYPE_OBJ[chat.user_type],\n          type: CHAT_TYPE_OBJ[chat.chat_type],\n          message: chat.text,\n          // url: chat.media_url ? ZLC.getMediaURL(chat.media_url) : null,\n          // url: chat.media_url ? ZLC.getMedia(chat.media_url) : null,\n          url: url,\n          timestamp: chat.sent_at,\n          isFirstLoad: true\n        });\n        console.log(\"LINE取得\");\n        console.log(chat.sent_at);\n        updateChatReadTime(chat.sent_at);\n      }\n      updateChatLogs(lineChatArray);\n    };\n    // 新規LINEチャットデータの取得\n    const getNewLINEChatData = async () => {\n      const lineChatData = await ZLC.getNewChat(lineUserId.value, last_read_time.value);\n      let lineChatArray = chatLogs.value;\n      for (let chat of lineChatData.chats) {\n        let url = null;\n        if(chat.media_url){\n          // スタンプの場合はアドレスをそのまま指定\n          if(chat.chat_type == 1){\n              url = chat.media_url;\n          // スタンプ以外の場合はS3のパスを取得し指定\n          } else {\n              // url = ZLC.getMedia(chat.media_url)\n              url = ZLC.getMedia(chat.chat_id);\n          }\n        }\n          lineChatArray.push({\n            chatId: chat.chat_id,\n            speaker: USER_TYPE_OBJ[chat.user_type],\n            type: CHAT_TYPE_OBJ[chat.chat_type],\n            message: chat.text,\n            // url: chat.media_url ? ZLC.getMedia(chat.media_url) : null,\n            url: url,\n            timestamp: chat.sent_at,\n            isFirstLoad: false\n          });\n          console.log(\"新規LINE取得\");\n          console.log(chat.sent_at);\n          updateChatReadTime(chat.sent_at);\n      }\n      updateChatLogs(lineChatArray);\n      if(isBottomScrollPosition.value === false){\n        newMessageCount.value = newMessageCount.value + lineChatData.chats.length;\n      }else{\n        newMessageCount.value = 0;\n      }\n    };\n    // 過去LINEチャットデータの取得\n    const getOldLINEChatData = async () => {\n      // チャット取得前のチャット表示エリアの高さを保存\n      contentScrollPosition.value = content.value.$el.parentElement.scrollHeight;\n      // console.log(\"getOldLINEChatData\", contentScrollPosition.value)\n      const lineChatData = await ZLC.getOldChat(lineUserId.value, oldest_chat_time.value, 10);\n      let lineChatArray = chatLogs.value;\n      for (let chat of lineChatData.chats) {\n        let url = null;\n        if(chat.media_url){\n          // スタンプの場合はアドレスをそのまま指定\n          if(chat.chat_type == 4){\n              url = chat.media_url;\n          // スタンプ以外の場合はS3のパスを取得し指定\n          } else {\n              // url = ZLC.getMedia(chat.media_url)\n              url = ZLC.getMedia(chat.chat_id);\n          }\n        }\n        lineChatArray.push({\n          chatId: chat.chat_id,\n          speaker: USER_TYPE_OBJ[chat.user_type],\n          type: CHAT_TYPE_OBJ[chat.chat_type],\n          message: chat.text,\n          // url: chat.media_url ? ZLC.getMedia(chat.media_url) : null,\n          url: url,\n          timestamp: chat.sent_at,\n          isFirstLoad: false\n        });\n        console.log(\"過去LINE取得\");\n        console.log(chat.sent_at);\n        updateChatReadTime(chat.sent_at);\n      }\n      updateChatLogs(lineChatArray);\n    };\n\n    const toggleAutoReload = (isAutoReload) => {\n      console.log(\"toggleAutoReload\");\n      if(isAutoReload && autoReloadId.value == null){\n        // 6時間後に自動更新をオフ\n        autoReloadLimitTime.value = dayjs().add(6, 'h');\n        autoReloadId.value = setInterval(async () => {\n          if(isFirstGetChatData.value){\n            isFirstGetChatData.value = false;\n            await getLINEChatData();\n          }else if(dayjs().isBefore(autoReloadLimitTime.value)){\n            await getNewLINEChatData();\n          }else{\n            header.value.stopAutoReload();\n          }\n        }, AUTO_RELOAD_INTERVAL);\n      }else if(!isAutoReload && autoReloadId.value != null){\n        clearTimeout(autoReloadId.value);\n        autoReloadId.value = null;\n        autoReloadLimitTime.value = null;\n      }\n    };\n    // チャット表示エリアのスクロールハンドル\n    const handleScroll = () => {\n      const target = content.value.$el.parentElement;\n      contentScrollPosition.value = null;\n      if(target.scrollTop + target.clientHeight  == target.scrollHeight){\n        isBottomScrollPosition.value = true;\n        newMessageCount.value = 0;\n      }else{\n        isBottomScrollPosition.value = false;\n      }\n    };\n\n    // chatLogsの更新\n    const updateChatLogs = (lineChatArray) => {\n      chatLogs.value = lineChatArray.sort((x, y) => {\n        if (x.chatId < y.chatId) return -1;\n        if (x.chatId > y.chatId) return 1;\n        return 0;\n      });\n      let sentDate = dayjs(0);\n      chatLogs.value.forEach((chatLog, i) => {\n        if(sentDate.isBefore( dayjs(chatLogs.value[i].timestamp.split(\" \")[0], \"YYYY-MM-DD\"))){\n          sentDate = dayjs(chatLogs.value[i].timestamp.split(\" \")[0], \"YYYY-MM-DD\");\n          chatLogs.value[i].isViewDate = true;\n        }else{\n          chatLogs.value[i].isViewDate = false;\n        }\n      });\n      // console.log(chatLogs)\n    };\n\n    // 新規チャット、過去チャット取得のための時間の更新\n    const updateChatReadTime = (sent_at) => {\n      if (dayjs(oldest_chat_time.value, \"YYYY-MM-DD HH:mm:ss.SSS\").isAfter(dayjs(sent_at, \"YYYY-MM-DD HH:mm:ss.SSS\"))) {\n        oldest_chat_time.value = sent_at;\n      }\n      if (dayjs(last_read_time.value, \"YYYY-MM-DD HH:mm:ss.SSS\").isBefore(dayjs(sent_at, \"YYYY-MM-DD HH:mm:ss.SSS\"))) {\n        last_read_time.value = sent_at;\n      }\n      console.log(oldest_chat_time.value)\n    };\n\n    // LINEチャット表示エリアの自動スクロール\n    // -過去のチャット読み込み時はスクロール位置固定\n    // -最新チャット読み込み時は一番下までスクロール\n    const contentScroll = (isFirstLoad=false) => {\n      if(content.value){\n        const target = content.value.$el.parentElement;\n        setTimeout(() => {\n          if(isFirstLoad){\n            target.scrollTop = target.scrollHeight;\n          }else if(contentScrollPosition.value != null){\n            target.scrollTop = target.scrollHeight - contentScrollPosition.value;\n          }else if(isBottomScrollPosition.value == null || isBottomScrollPosition.value == true){\n            target.scrollTop = target.scrollHeight;\n          }\n        }, 0);\n      }\n    };\n\n    const getTerminal = () => {\n      if(window.outerWidth > window.outerHeight){\n        terminal.value = \"pc\";\n      }else{\n        terminal.value = \"sp\"\n      }\n    };\n\n    const openPreview = (tag, src) => {\n      previewInfo.isShow = true;\n      previewInfo.tag = tag;\n      previewInfo.src = src;\n    };\n\n    const closePreview = () => {\n      previewInfo.isShow = false;\n    };\n\n    const showAlert = (type, msg) => {\n      if(type){\n        alertList.value.push({\n          type: type,\n          msg: msg\n        });\n        setTimeout(function () {\n          alertList.value.shift();\n        }, 2500);\n      }\n    };\n\n    const scrollBottom = () => {\n      if(content.value){\n        const target = content.value.$el.parentElement;\n        target.scrollTop = target.scrollHeight;\n      }\n    };\n\n    const getBlockFlg = async () => {\n      console.log(lineUserId.value);\n      return await ZLC.getBlockFlg(lineUserId.value).catch((err) => {\n          console.error(err);\n      });\n    }\n\n    const setBlockFlg = async () => {\n        console.log(lineUserId.value);\n        block_status.value = !block_status.value;\n        console.log(\"ブロックステータス：\",block_status.value);\n        await ZLC.setBlockFlg(lineUserId.value, block_status.value).catch((err) => {\n          console.error(err);\n        });\n        if(block_status.value){\n          showAlert(\"success\", \"ブロックしました。\");\n        } else {\n          showAlert(\"success\", \"ブロック解除しました。\");\n        }\n    };\n    return {\n      header,\n      content,\n      chatLogs,\n      sendChat,\n      getNewLINEChatData,\n      getOldLINEChatData,\n      toggleAutoReload,\n      contentScroll,\n      handleScroll,\n      isLoaded,\n      terminal,\n      previewInfo,\n      openPreview,\n      closePreview,\n      alertList,\n      showAlert,\n      supportNotification,\n      newMessageCount,\n      scrollBottom,\n      block_status,\n      getBlockFlg,\n      setBlockFlg\n    };\n  }\n}\n</script>\n<style scoped>\n#loading-window {\n  display: flex;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n  background-color: white;\n  z-index: 9999;\n}\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.5s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n.content {\n  background-color: #b0d2ff;\n}\n.alert-fade-enter-active,\n.alert-fade-leave-active {\n  transition: opacity 0.2s ease;\n}\n\n.alert-fade-enter-from,\n.alert-fade-leave-to {\n  opacity: 0;\n}\n#alert-wrapper{\n  width: 100%;\n  max-height: 80%;\n  position: absolute;\n  top: 55px;\n  display: flex;\n  justify-content: center;\n  overflow: hidden;\n  pointer-events: none;\n}\n#new-message-button-wrapper {\n  position: absolute;\n  bottom: 55px;\n  display: flex;\n  justify-content: center;\n  left: 0;\n  right: 0;\n  pointer-events: none;\n}\n#new-message-button-wrapper button {\n  color: #ffffff;\n  background-color: #00000099;\n  pointer-events: auto;\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}